# ğŸ¬ è§†é¢‘æ–‡ä»¶æ ¼å¼è½¬æ¢æŒ‡å—

## ğŸ“‹ æ”¯æŒçš„æ ¼å¼

æˆ‘ä»¬çš„çº¯è§†é¢‘ä¼ è¾“WebRTCå®¢æˆ·ç«¯æ”¯æŒä»¥ä¸‹è¾“å…¥æ ¼å¼ï¼š

### âœ… **YUV åŸå§‹æ ¼å¼**ï¼ˆæ¨èï¼‰
- **æ–‡ä»¶æ‰©å±•å**: `.yuv`
- **æ ¼å¼**: I420 (YUV420P) åŸå§‹æ•°æ®
- **ç‰¹ç‚¹**: æ— å¤´éƒ¨ä¿¡æ¯ï¼Œçº¯åƒç´ æ•°æ®
- **éœ€è¦**: æ‰‹åŠ¨æŒ‡å®šåˆ†è¾¨ç‡å’Œå¸§ç‡

### âœ… **æ‘„åƒå¤´/ç”Ÿæˆå™¨**
- å¦‚æœæ²¡æœ‰YUVæ–‡ä»¶ï¼Œè‡ªåŠ¨ä½¿ç”¨æ‘„åƒå¤´æˆ–å¸§ç”Ÿæˆå™¨

## ğŸ”„ è§†é¢‘æ ¼å¼è½¬æ¢

### 1. **MP4 â†’ YUV**
```bash
# è½¬æ¢ä¸º640x480ï¼Œ30fps
ffmpeg -i input.mp4 -pix_fmt yuv420p -s 640x480 -r 30 output.yuv

# è½¬æ¢ä¸º1280x720ï¼Œ25fps
ffmpeg -i input.mp4 -pix_fmt yuv420p -s 1280x720 -r 25 output.yuv
```

### 2. **Y4M â†’ YUV**
```bash
# Y4Mæ–‡ä»¶åŒ…å«å¤´éƒ¨ä¿¡æ¯ï¼Œéœ€è¦è½¬æ¢ä¸ºçº¯YUV
ffmpeg -i input.y4m -c:v rawvideo -pix_fmt yuv420p output.yuv
```

### 3. **AVI â†’ YUV**
```bash
ffmpeg -i input.avi -pix_fmt yuv420p -s 640x480 -r 30 output.yuv
```

### 4. **ä»ç½‘ç»œæ‘„åƒå¤´åˆ›å»ºæµ‹è¯•è§†é¢‘**
```bash
# å½•åˆ¶10ç§’çš„æ‘„åƒå¤´è§†é¢‘
ffmpeg -f v4l2 -i /dev/video0 -t 10 -pix_fmt yuv420p -s 640x480 -r 30 test_video.yuv
```

### 5. **ç”Ÿæˆæµ‹è¯•æ¨¡å¼è§†é¢‘**
```bash
# ç”Ÿæˆå½©è‰²æµ‹è¯•æ¨¡å¼ï¼ˆ5ç§’ï¼‰
ffmpeg -f lavfi -i testsrc2=size=640x480:rate=30 -t 5 -pix_fmt yuv420p test_pattern.yuv

# ç”Ÿæˆç§»åŠ¨æ–¹å—æµ‹è¯•æ¨¡å¼
ffmpeg -f lavfi -i "testsrc=size=640x480:rate=30" -t 5 -pix_fmt yuv420p moving_squares.yuv
```

## ğŸ“ **é‡è¦æ³¨æ„äº‹é¡¹**

### âš ï¸ **åˆ†è¾¨ç‡å’Œé…ç½®å¿…é¡»åŒ¹é…**
ç¡®ä¿YUVæ–‡ä»¶çš„å®é™…åˆ†è¾¨ç‡ä¸é…ç½®æ–‡ä»¶ä¸­çš„è®¾ç½®å®Œå…¨ä¸€è‡´ï¼š

```yaml
video:
  width: 640    # å¿…é¡»åŒ¹é…YUVæ–‡ä»¶çš„å®é™…å®½åº¦
  height: 480   # å¿…é¡»åŒ¹é…YUVæ–‡ä»¶çš„å®é™…é«˜åº¦
  fps: 30       # å»ºè®®çš„æ’­æ”¾å¸§ç‡
  file_path: '/home/wuq/webrtc-checkout/test_video.yuv'
```

### ğŸ“Š **æ–‡ä»¶å¤§å°è®¡ç®—**
YUV420Pæ ¼å¼çš„æ–‡ä»¶å¤§å°è®¡ç®—ï¼š
- **æ¯å¸§å¤§å°** = `width Ã— height Ã— 1.5` å­—èŠ‚
- **æ€»æ–‡ä»¶å¤§å°** = `æ¯å¸§å¤§å° Ã— æ€»å¸§æ•°`

ä¾‹å¦‚ï¼š640Ã—480ï¼Œ30fpsï¼Œ10ç§’è§†é¢‘
- æ¯å¸§å¤§å° = 640 Ã— 480 Ã— 1.5 = 460,800 å­—èŠ‚
- æ€»å¸§æ•° = 30 Ã— 10 = 300 å¸§
- æ–‡ä»¶å¤§å° = 460,800 Ã— 300 = 138,240,000 å­—èŠ‚ â‰ˆ 132 MB

## ğŸ¯ **æµ‹è¯•æ–‡ä»¶å‡†å¤‡ç¤ºä¾‹**

### åˆ›å»ºä¸€ä¸ªçŸ­æµ‹è¯•è§†é¢‘ï¼š
```bash
# æ–¹æ³•1ï¼šä»ç°æœ‰è§†é¢‘è½¬æ¢ï¼ˆæ¨èï¼‰
ffmpeg -i your_video.mp4 -pix_fmt yuv420p -s 640x480 -r 30 -t 10 test_video.yuv

# æ–¹æ³•2ï¼šç”Ÿæˆæµ‹è¯•æ¨¡å¼
ffmpeg -f lavfi -i testsrc2=size=640x480:rate=30 -t 10 -pix_fmt yuv420p test_video.yuv

# æ–¹æ³•3ï¼šä»æ‘„åƒå¤´å½•åˆ¶
ffmpeg -f v4l2 -i /dev/video0 -t 10 -pix_fmt yuv420p -s 640x480 -r 30 test_video.yuv
```

### éªŒè¯æ–‡ä»¶ï¼š
```bash
# æ£€æŸ¥æ–‡ä»¶å¤§å°ï¼ˆåº”è¯¥ç¬¦åˆè®¡ç®—å…¬å¼ï¼‰
ls -lh test_video.yuv

# æ’­æ”¾éªŒè¯ï¼ˆå¦‚æœå®‰è£…äº†ffplayï¼‰
ffplay -f rawvideo -pix_fmt yuv420p -s 640x480 -r 30 test_video.yuv
```

## ğŸ”§ **é…ç½®æ–‡ä»¶ç¤ºä¾‹**

åˆ›å»ºå¯¹åº”çš„ `real_network_config.yaml`ï¼š
```yaml
video:
  width: 640              # ä¸YUVæ–‡ä»¶åŒ¹é…
  height: 480             # ä¸YUVæ–‡ä»¶åŒ¹é…  
  fps: 30                 # æ’­æ”¾å¸§ç‡
  file_path: '/home/wuq/webrtc-checkout/test_video.yuv'
```

## ğŸš€ **å¿«é€Ÿæµ‹è¯•æµç¨‹**

```bash
# 1. ç”Ÿæˆæµ‹è¯•è§†é¢‘ï¼ˆ10ç§’ï¼Œ640x480ï¼‰
ffmpeg -f lavfi -i testsrc2=size=640x480:rate=30 -t 10 -pix_fmt yuv420p test_video.yuv

# 2. ç¡®è®¤æ–‡ä»¶å­˜åœ¨å’Œå¤§å°
ls -lh test_video.yuv
# åº”è¯¥æ˜¾ç¤ºçº¦ ~14MB

# 3. è¿è¡Œæµ‹è¯•
python3 run_real_network_test.py
```

## âŒ **å¸¸è§é”™è¯¯**

1. **æ–‡ä»¶æ ¼å¼é”™è¯¯**ï¼šä½¿ç”¨äº†Y4Mæˆ–MP4æ–‡ä»¶è€Œä¸æ˜¯YUV
2. **åˆ†è¾¨ç‡ä¸åŒ¹é…**ï¼šé…ç½®ä¸­çš„å°ºå¯¸ä¸å®é™…YUVæ–‡ä»¶ä¸ç¬¦
3. **æ–‡ä»¶è·¯å¾„é”™è¯¯**ï¼šæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”å¯è¯»
4. **æƒé™é—®é¢˜**ï¼šç¡®ä¿æ–‡ä»¶æœ‰è¯»å–æƒé™

ç°åœ¨ä½ çŸ¥é“å¦‚ä½•æ­£ç¡®å‡†å¤‡è§†é¢‘æ–‡ä»¶äº†ï¼ğŸ¬