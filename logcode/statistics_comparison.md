# 统计信息对比：修改前后差异

## 修改说明
将统计信息的计算从基于原始事件改为基于20ms时间窗口平滑数据，使统计结果更符合实际的网络行为模式。

## 对比结果

### 修改前（基于原始事件）
```
=== 统计信息 ===
PUSCH (实际传输):
  平均比率: 19.019
  中位数比率: 0.000
  比率 < 1 (供给不足): 1630 (90.2%)
  比率 >= 1 (供给充足): 177 (9.8%)

Grant (TBS查表预测):
  平均比率: 1.051
  中位数比率: 0.000
  比率 < 1 (供给不足): 1684 (93.2%)
  比率 >= 1 (供给充足): 123 (6.8%)

=== PUSCH vs Grant 对比 ===
平均差异 (PUSCH - Grant): 5944.6 bytes
PUSCH > Grant 的情况: 484 (26.8%)
PUSCH < Grant 的情况: 115 (6.4%)
PUSCH = Grant 的情况: 1208 (66.9%)
```

### 修改后（基于20ms时间窗口平滑）
```
=== 统计信息 (20ms时间窗口平滑) ===
PUSCH (实际传输) - 平滑后:
  平均比率: 17.850
  中位数比率: 0.013
  比率 < 1 (供给不足): 1603 (88.7%)
  比率 >= 1 (供给充足): 204 (11.3%)

Grant (TBS查表预测) - 平滑后:
  平均比率: 0.887
  中位数比率: 0.000
  比率 < 1 (供给不足): 1651 (91.4%)
  比率 >= 1 (供给充足): 156 (8.6%)

=== PUSCH vs Grant 对比 (20ms时间窗口平滑) ===
平均比率差异 (PUSCH - Grant): 16.964
PUSCH比率 > Grant比率 的情况: 860 (47.6%)
PUSCH比率 < Grant比率 的情况: 184 (10.2%)
PUSCH比率 = Grant比率 的情况: 771 (42.7%)

=== 原始字节差异对比 (参考) ===
平均差异 (PUSCH - Grant): 5944.6 bytes
PUSCH > Grant 的情况: 484 (26.8%)
PUSCH < Grant 的情况: 115 (6.4%)
PUSCH = Grant 的情况: 1208 (66.9%)
```

## 主要差异分析

### 1. 平均比率变化
- **PUSCH**: 19.019 → 17.850 (下降6.1%)
- **Grant**: 1.051 → 0.887 (下降15.6%)
- **平滑处理减少了极值的影响**，使平均值更稳定

### 2. 中位数比率变化
- **PUSCH**: 0.000 → 0.013 (显著提升)
- **Grant**: 0.000 → 0.000 (保持不变)
- **平滑处理提高了中位数值**，反映了更真实的供需关系

### 3. 供给充足比例变化
- **PUSCH**: 9.8% → 11.3% (提升1.5%)
- **Grant**: 6.8% → 8.6% (提升1.8%)
- **平滑处理增加了供给充足的比例**

### 4. 对比关系变化
- **PUSCH > Grant**: 26.8% → 47.6% (大幅提升20.8%)
- **PUSCH < Grant**: 6.4% → 10.2% (提升3.8%)  
- **PUSCH = Grant**: 66.9% → 42.7% (下降24.2%)
- **平滑处理使PUSCH和Grant的差异更明显**

## 结论

20ms时间窗口平滑统计的优势：

1. **减少噪声影响**：消除了瞬时极值对统计的干扰
2. **更真实的趋势**：反映了网络中实际的供需关系模式  
3. **时间连续性**：考虑了相邻时间点的相关性
4. **更稳定的指标**：统计结果波动更小，更适合长期监控

这种基于时间窗口的统计方法更符合实际的网络分析需求，能够更准确地反映网络资源分配的效率。